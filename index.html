<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level B Unit 10 Vocab Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --cyan: #00ffff;
            --magenta: #ff00ff;
            --lime: #00ff00;
            --yellow: #ffff00;
        }

        body {
            background-color: #050507;
            color: white;
            font-family: 'Rajdhani', sans-serif;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
        }

        .neon-title {
            font-family: 'Orbitron', sans-serif;
            text-shadow: 0 0 10px var(--cyan), 0 0 20px var(--cyan);
        }

        .neon-border-cyan {
            border: 2px solid var(--cyan);
            box-shadow: 0 0 10px var(--cyan);
        }

        .neon-border-magenta {
            border: 2px solid var(--magenta);
            box-shadow: 0 0 10px var(--magenta);
        }

        .neon-border-lime {
            border: 2px solid var(--lime);
            box-shadow: 0 0 10px var(--lime);
        }

        .neon-text-yellow {
            color: var(--yellow);
            text-shadow: 0 0 10px var(--yellow), 0 0 20px var(--yellow);
        }

        .aspect-16-9 {
            width: 95vw;
            max-width: 168vh;
            aspect-ratio: 16 / 9;
            max-height: 90vh;
            position: relative;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(20px);
            border-radius: 2vw;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            padding: 3vh;
        }

        .glare-cyan {
            position: absolute;
            top: -20%;
            left: -20%;
            width: 50%;
            height: 50%;
            background: rgba(0, 255, 255, 0.1);
            filter: blur(120px);
            pointer-events: none;
        }

        .glare-magenta {
            position: absolute;
            bottom: -20%;
            right: -20%;
            width: 50%;
            height: 50%;
            background: rgba(255, 0, 255, 0.1);
            filter: blur(120px);
            pointer-events: none;
        }

        .hidden-step { display: none !important; }

        .btn-hover:hover {
            transform: scale(1.02);
            transition: transform 0.2s ease;
        }

        .vocab-font {
            font-size: clamp(14pt, 2.5vh, 24pt);
            line-height: 1.2;
        }

        .title-font {
            font-size: clamp(24pt, 6vh, 60pt);
        }

        .date-font {
            font-size: 12pt;
        }

        .signature {
            font-size: 10pt;
            position: absolute;
            bottom: 2vh;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            letter-spacing: 0.1vw;
            font-weight: 900;
            text-transform: uppercase;
            z-index: 50;
        }

        .fs-btn {
            position: absolute;
            bottom: 2vh;
            left: 3vh;
            z-index: 100;
            padding: 0.5vh 1.2vw;
            background: rgba(255, 255, 0, 0.05);
            border: 1px solid rgba(255, 255, 0, 0.4);
            border-radius: 0.5vw;
            color: var(--yellow);
            font-weight: 700;
            text-transform: uppercase;
            font-size: 10pt;
            letter-spacing: 0.1vw;
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5vw;
        }

        .fs-btn:hover {
            background: rgba(255, 255, 0, 0.2);
            border-color: var(--yellow);
            box-shadow: 0 0 10px var(--yellow);
        }

        .nav-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 1.5vh;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 60;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-arrow:hover {
            background: rgba(0, 255, 255, 0.2);
            border-color: var(--cyan);
            box-shadow: 0 0 15px var(--cyan);
        }

        .nav-arrow.disabled {
            opacity: 0.2;
            cursor: not-allowed;
            pointer-events: none;
        }

        .nav-left { left: 2vh; }
        .nav-right { right: 2vh; }

        .option-selected {
            background: rgba(0, 255, 255, 0.3) !important;
            border-color: var(--cyan) !important;
            box-shadow: 0 0 15px var(--cyan) !important;
        }

        .trophy-glow {
            filter: drop-shadow(0 0 15px var(--yellow));
            animation: float 3s ease-in-out infinite;
        }

        .screenshot-btn {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid var(--cyan);
            color: var(--cyan);
            box-shadow: 0 0 10px var(--cyan);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            width: 3.5vw;
            height: 3.5vw;
            margin-right: 1vw;
        }

        .screenshot-btn:hover {
            background: var(--cyan);
            color: black;
            box-shadow: 0 0 20px var(--cyan);
            transform: scale(1.1);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-10px) scale(1.05); }
        }
    </style>
</head>
<body>

    <div class="aspect-16-9 shadow-2xl">
        <div class="glare-cyan"></div>
        <div class="glare-magenta"></div>

        <!-- SIGNATURE -->
        <div class="signature neon-text-yellow">Created by Amanullah Khan</div>

        <!-- FULL SCREEN BUTTON -->
        <button class="fs-btn" onclick="toggleFullScreen()">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"></path></svg>
            Full Screen
        </button>

        <!-- NAVIGATION ARROWS -->
        <button id="nav-back" class="nav-arrow nav-left hidden-step" onclick="goBack()">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
        </button>
        <button id="nav-next" class="nav-arrow nav-right hidden-step" onclick="goNext()">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
        </button>

        <!-- INTRO STEP -->
        <div id="step-intro" class="flex-1 flex flex-col items-center justify-center text-center space-y-[4vh]">
            <h1 class="neon-title uppercase font-black italic tracking-tighter title-font">
                Level B <span style="color: var(--magenta);">Unit 10 Vocab</span>
            </h1>
            
            <div class="w-full max-w-[30vw] space-y-[2vh]">
                <div class="relative">
                    <input type="text" id="input-firstName" placeholder="First Name" 
                           class="w-full bg-white/5 neon-border-cyan p-[1.5vh] pl-[1vw] rounded-xl outline-none vocab-font">
                </div>
                <div class="relative">
                    <input type="text" id="input-lastName" placeholder="Last Name" 
                           class="w-full bg-white/5 neon-border-magenta p-[1.5vh] pl-[1vw] rounded-xl outline-none vocab-font">
                </div>
                <div class="relative">
                    <input type="text" id="input-class" placeholder="Class / Section" 
                           class="w-full bg-white/5 neon-border-lime p-[1.5vh] pl-[1vw] rounded-xl outline-none vocab-font">
                </div>

                <button onclick="startQuiz()" 
                        class="w-full bg-[#00ffff] text-black py-[2vh] rounded-xl font-bold uppercase tracking-widest btn-hover vocab-font mt-[2vh]">
                    Initialize System
                </button>
            </div>
        </div>

        <!-- QUIZ STEP -->
        <div id="step-quiz" class="flex-1 flex flex-col overflow-hidden hidden-step">
            <div class="flex justify-between items-center mb-[2vh]">
                <div class="neon-border-cyan px-[2vw] py-[0.5vh] rounded-full text-[#00ffff] font-bold" style="font-size: 1.2vw;">
                    LOG: <span id="current-question-num">1</span> / 25
                </div>
                <div class="text-white/40 uppercase tracking-widest" style="font-size: 1vw;">
                    Mode: Vocab Assessment
                </div>
            </div>

            <div class="flex-1 flex flex-col justify-center items-center px-[4vw]">
                <h2 id="question-text" class="font-bold mb-[4vh] text-center text-white leading-tight w-full" style="font-size: clamp(18pt, 4vh, 32pt);">
                    Question loading...
                </h2>

                <div id="options-container" class="grid grid-cols-1 gap-[1.5vh] w-full max-w-[40vw]">
                </div>
            </div>
        </div>

        <!-- RESULT STEP -->
        <div id="step-result" class="flex-1 flex flex-col h-full hidden-step">
            <h1 class="neon-title text-center uppercase tracking-widest mb-[2vh]" style="font-size: 2.5vw; color: var(--cyan);">
                Level B Unit 10 Vocab
            </h1>

            <!-- TROPHY / MERIT SECTION -->
            <div id="merit-badge" class="flex flex-col items-center mb-[2vh] hidden-step">
                <svg class="w-[6vh] h-[6vh] text-yellow-400 trophy-glow" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M7 2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v2a4 4 0 0 1-4 4v2.5a.5.5 0 0 0 1 0V9a1 1 0 0 1 2 0v1.5a2.5 2.5 0 0 1-5 0V9a1 1 0 0 1 2 0v1.5a.5.5 0 0 0 1 0V8a4 4 0 0 1-4-4V2zM4 3h1v3a4.011 4.011 0 0 0 1.242 2.858A3.501 3.501 0 0 1 4 6V3zm15 0h1v3a3.501 3.501 0 0 1-2.242 3.258A4.011 4.011 0 0 0 19 6V3zM6 19h12v1a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-1zm1-2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v1H7v-1z"/>
                </svg>
                <div class="neon-text-yellow font-black uppercase tracking-[0.5vw] mt-2" style="font-size: 1.5vw;">Exquisite Work</div>
            </div>

            <div class="grid grid-cols-2 gap-[2vw] mb-[3vh]">
                <div class="bg-white/5 p-[2vh] rounded-2xl border border-white/10 flex flex-col justify-center items-center">
                    <div class="text-white/40 uppercase text-[0.8vw]">Student Operator</div>
                    <div class="font-bold text-[#00ffff] vocab-font" id="res-name">NAME</div>
                </div>
                <div class="bg-white/5 p-[2vh] rounded-2xl border border-white/10 flex flex-col justify-center items-center">
                    <div class="text-white/40 uppercase text-[0.8vw]">Division</div>
                    <div class="font-bold text-[#ff00ff] vocab-font" id="res-class">CLASS</div>
                </div>
            </div>

            <div class="flex-1 flex flex-col items-center justify-center bg-black/40 rounded-3xl border border-white/5 p-[2vh] space-y-[2vh]">
                <div class="flex items-center gap-[2vw]">
                    <div class="text-center">
                        <div class="font-black text-white" style="font-size: 5vw;" id="res-percent">0%</div>
                        <div class="text-[#00ff00] font-bold vocab-font" id="res-score">0 / 25 Correct</div>
                    </div>
                </div>

                <div class="w-[60%] h-[2.5vh] bg-white/10 rounded-full border border-white/20 overflow-hidden relative">
                    <div id="score-bar" class="h-full rounded-full transition-all duration-1000"
                         style="width: 0%; background: linear-gradient(90deg, var(--cyan), var(--lime), var(--magenta));"></div>
                </div>
            </div>

            <div class="mt-[2vh] flex justify-between items-end pb-[2vh]">
                <div id="res-date" class="flex items-center gap-2 text-[#00ffff]/60 date-font">
                    DATE
                </div>
                
                <div class="flex items-center">
                    <!-- SCREENSHOT BUTTON -->
                    <button onclick="captureScreen()" class="screenshot-btn" title="Capture Result">
                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    </button>
                    
                    <button onclick="window.location.reload()"
                            class="neon-border-magenta px-[2vw] py-[1vh] rounded-lg text-[#ff00ff] font-bold hover:bg-[#ff00ff] hover:text-black transition-all z-10"
                            style="font-size: 1.2vw;">SYSTEM RESTART</button>
                </div>
            </div>
        </div>
    </div>

    <audio id="audio-correct" src="correct.mp3" preload="auto"></audio>
    <audio id="audio-wrong" src="wrong.mp3" preload="auto"></audio>

    <script>
        const questionBank = [
            { type: 'mcq', question: "If a house is described as 'dilapidated', what does it look like?", options: ["Brand new and modern", "Falling apart and in ruin", "Small and cozy", "Extremely expensive"], answer: "Falling apart and in ruin" },
            { type: 'tf', question: "To 'dismantle' something means to put it together piece by piece.", options: ["True", "False"], answer: "False" },
            { type: 'mcq', question: "The host was so _______ that he offered us his own bed and a five-course meal.", options: ["notorious", "hospitable", "morbid", "shirk"], answer: "hospitable" },
            { type: 'mcq', question: "Which word is a synonym for 'shirk'?", options: ["Accept", "Avoid", "Encourage", "Search"], answer: "Avoid" },
            { type: 'tf', question: "A 'parasite' is an organism that gives more than it takes from its host.", options: ["True", "False"], answer: "False" },
            { type: 'matching', question: "Match the Word to its Definition:", pairs: { "Bellow": "To roar", "Lair": "A hideout", "Farce": "A mockery" }, options: ["To roar", "A hideout", "A mockery"] },
            { type: 'mcq', question: "The runner was exhausted after completing the ________ marathon through the desert.", options: ["grueling", "lavish", "futile", "dilapidated"], answer: "grueling" },
            { type: 'mcq', question: "What is a 'beneficiary'?", options: ["Someone who gives a gift", "Someone who receives an advantage", "A person who commits a crime", "A professional athlete"], answer: "Someone who receives an advantage" },
            { type: 'tf', question: "If an effort is 'futile', it is successful and productive.", options: ["True", "False"], answer: "False" },
            { type: 'mcq', question: "The kitchen was filled with so much _______ that we couldn't even see the counters.", options: ["clutter", "surplus", "lair", "timidity"], answer: "clutter" },
            { type: 'mcq', question: "To 'botch' a job means to:", options: ["Do it perfectly", "Repair it", "Bungle or mess it up", "Finish it early"], answer: "Bungle or mess it up" },
            { type: 'tf', question: "A 'morbid' person has an unhealthy interest in unpleasant things like death.", options: ["True", "False"], answer: "True" },
            { type: 'matching', question: "Match the Word to its Synonym:", pairs: { "Lavish": "Extravagant", "Surplus": "Excess", "Veto": "Halt" }, options: ["Extravagant", "Excess", "Halt"] },
            { type: 'mcq', question: "The criminal was ________ for his high-speed chases and narrow escapes.", options: ["hospitable", "notorious", "beneficiary", "shirk"], answer: "notorious" },
            { type: 'mcq', question: "What does 'timidity' describe?", options: ["Extreme bravery", "Lack of courage or shyness", "Great physical strength", "The speed of a runner"], answer: "Lack of courage or shyness" },
            { type: 'tf', question: "To 'pamper' someone means to treat them with extreme kindness and indulgence.", options: ["True", "False"], answer: "True" },
            { type: 'mcq', question: "The President decided to _______ the bill because he did not agree with its terms.", options: ["veto", "botch", "dismantle", "pamper"], answer: "veto" },
            { type: 'mcq', question: "Which word describes a large amount left over after requirements are met?", options: ["Shortage", "Clutter", "Surplus", "Lair"], answer: "Surplus" },
            { type: 'tf', question: "A 'lair' is a public park where people gather.", options: ["True", "False"], answer: "False" },
            { type: 'matching', question: "Match the Word to its Context:", pairs: { "Dismantle": "Take apart a machine", "Shirk": "Avoid your duties", "Hospitable": "Welcome a guest" }, options: ["Take apart a machine", "Avoid your duties", "Welcome a guest"] },
            { type: 'mcq', question: "The play was a total _______; the actors forgot their lines and the set fell over.", options: ["farce", "clutter", "surplus", "veto"], answer: "farce" },
            { type: 'mcq', question: "If you 'pamper' a pet, you are:", options: ["Ignoring it", "Training it strictly", "Spoiling it with attention", "Feeding it only once a day"], answer: "Spoiling it with attention" },
            { type: 'tf', question: "A 'beneficiary' is the person who signs a contract first.", options: ["True", "False"], answer: "False" },
            { type: 'mcq', question: "It is ________ to try to stop the rain with an umbrella held upside down.", options: ["futile", "grueling", "hospitable", "notorious"], answer: "futile" },
            { type: 'mcq', question: "Someone who lives off others without giving anything back is a:", options: ["Host", "Parasite", "Beneficiary", "Hospitable"], answer: "Parasite" },
        ];

        let currentIdx = 0;
        let studentData = { firstName: '', lastName: '', class: '' };
        let userResults = new Array(questionBank.length).fill(null);

        function playSound(type) {
            const audio = document.getElementById(type === 'correct' ? 'audio-correct' : 'audio-wrong');
            if (audio) { audio.currentTime = 0; audio.play().catch(e => {}); }
        }

        function toggleFullScreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen?.() || document.documentElement.webkitRequestFullscreen?.();
            } else {
                document.exitFullscreen?.();
            }
        }

        function startQuiz() {
            studentData.firstName = document.getElementById('input-firstName').value;
            studentData.lastName = document.getElementById('input-lastName').value;
            studentData.class = document.getElementById('input-class').value;
            if (studentData.firstName && studentData.lastName && studentData.class) {
                if (!document.fullscreenElement) toggleFullScreen();
                document.getElementById('step-intro').classList.add('hidden-step');
                document.getElementById('step-quiz').classList.remove('hidden-step');
                document.getElementById('nav-back').classList.remove('hidden-step');
                document.getElementById('nav-next').classList.remove('hidden-step');
                renderQuestion();
            }
        }

        function captureScreen() {
            const element = document.querySelector('.aspect-16-9');
            html2canvas(element, {
                backgroundColor: "#050507",
                scale: 2
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `Quiz_Result_${studentData.firstName}_${studentData.lastName}.png`;
                link.href = canvas.toDataURL("image/png");
                link.click();
            });
        }

        function renderQuestion() {
            const q = questionBank[currentIdx];
            document.getElementById('current-question-num').innerText = currentIdx + 1;
            document.getElementById('question-text').innerText = q.question;
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            document.getElementById('nav-back').classList.toggle('disabled', currentIdx === 0);
            const prev = userResults[currentIdx];

            if (q.type === 'mcq') {
                q.options.forEach(opt => {
                    const btn = createBtn(opt, () => handleMCQ(opt));
                    if (prev && prev.selectedValue === opt) btn.classList.add('option-selected');
                    container.appendChild(btn);
                });
            } else if (q.type === 'tf') {
                const grid = document.createElement('div');
                grid.className = 'flex gap-[2vw] w-full';
                const t = createBtn('TRUE', () => handleTF(true), 'neon-border-lime text-[#00ff00] py-[4vh] flex-1');
                const f = createBtn('FALSE', () => handleTF(false), 'neon-border-magenta text-[#ff00ff] py-[4vh] flex-1');
                if (prev) {
                    if (prev.selectedValue === "True") t.classList.add('option-selected');
                    if (prev.selectedValue === "False") f.classList.add('option-selected');
                }
                grid.append(t, f);
                container.appendChild(grid);
            } else if (q.type === 'matching') {
                const inner = document.createElement('div');
                inner.className = 'space-y-[1.5vh] w-full';
                const state = prev ? { ...prev.selectedValue } : {};
                Object.keys(q.pairs).forEach(key => {
                    const row = document.createElement('div');
                    row.className = 'flex items-center gap-[1vw]';
                    const l = document.createElement('div');
                    l.className = 'flex-1 p-[1vh] bg-white/10 rounded-lg text-center border border-white/10 vocab-font';
                    l.innerText = key;
                    const s = document.createElement('select');
                    s.className = 'flex-1 p-[1vh] bg-black neon-border-magenta rounded-lg outline-none text-center vocab-font';
                    s.innerHTML = '<option value="">Select...</option>';
                    q.options.forEach(o => {
                        const op = document.createElement('option');
                        op.value = o; op.innerText = o;
                        if (state[key] === o) op.selected = true;
                        s.appendChild(op);
                    });
                    s.onchange = (e) => {
                        state[key] = e.target.value;
                        if (Object.keys(state).length === Object.keys(q.pairs).length) {
                            let ok = true;
                            Object.keys(q.pairs).forEach(k => { if(state[k] !== q.pairs[k]) ok = false; });
                            userResults[currentIdx] = { isCorrect: ok, selectedValue: { ...state } };
                            playSound(ok ? 'correct' : 'wrong');
                            setTimeout(() => goNext(), 500);
                        }
                    };
                    row.append(l, s);
                    inner.appendChild(row);
                });
                container.appendChild(inner);
            }
        }

        function createBtn(text, onClick, cl = '') {
            const b = document.createElement('button');
            b.className = cl || 'w-full text-left p-[2vh] bg-white/5 border border-white/10 rounded-xl hover:bg-[#00ffff]/20 hover:border-[#00ffff] transition-all btn-hover vocab-font';
            b.innerText = text;
            b.onclick = onClick;
            return b;
        }

        function handleMCQ(v) { 
            const ok = v === questionBank[currentIdx].answer;
            userResults[currentIdx] = { isCorrect: ok, selectedValue: v };
            playSound(ok ? 'correct' : 'wrong');
            setTimeout(() => goNext(), 300); 
        }

        function handleTF(v) { 
            const str = v ? "True" : "False";
            const ok = str === questionBank[currentIdx].answer;
            userResults[currentIdx] = { isCorrect: ok, selectedValue: str };
            playSound(ok ? 'correct' : 'wrong');
            setTimeout(() => goNext(), 300); 
        }

        function goBack() { if (currentIdx > 0) { currentIdx--; renderQuestion(); } }
        function goNext() { if (currentIdx < questionBank.length - 1) { currentIdx++; renderQuestion(); } else { showResult(); } }

        function showResult() {
            document.getElementById('step-quiz').classList.add('hidden-step');
            document.getElementById('nav-back').classList.add('hidden-step');
            document.getElementById('nav-next').classList.add('hidden-step');
            const stepRes = document.getElementById('step-result');
            stepRes.classList.remove('hidden-step');
            
            document.getElementById('res-name').innerText = `${studentData.firstName} ${studentData.lastName}`;
            document.getElementById('res-class').innerText = `Class ${studentData.class}`;
            
            const finalScore = userResults.reduce((acc, res) => acc + (res?.isCorrect ? 1 : 0), 0);
            const percent = Math.round((finalScore / 25) * 100);
            
            document.getElementById('res-percent').innerText = `${percent}%`;
            document.getElementById('res-score').innerText = `${finalScore} / 25 Correct`;
            document.getElementById('res-date').innerHTML = `<svg class="w-6 h-6 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> ${new Date().toLocaleDateString()}`;
            document.getElementById('score-bar').style.width = `${percent}%`;

            const merit = document.getElementById('merit-badge');
            if (percent >= 90) {
                merit.classList.remove('hidden-step');
            } else {
                merit.classList.add('hidden-step');
            }
        }
    </script>
</body>
</html>
